# Enable synthesis service integration heartbeat tasks
AUTOMATON_SYNTHESIS_INTEGRATION_ENABLED=true

# Product service URL + internal admin token
AUTOMATON_PRODUCT_API_BASE_URL=http://127.0.0.1:3001
AUTOMATON_INTERNAL_TOKEN=dev-internal-token

# Wake thresholds
AUTOMATON_PIPELINE_FRESHNESS_MAX_MINUTES=20
AUTOMATON_MARGIN_MIN=0.20
AUTOMATON_RETENTION_MIN=0.20
AUTOMATON_SIGNAL_QUALITY_MIN=0.62
AUTOMATON_SIGNAL_QUALITY_DRIFT_MAX=0.08
AUTOMATON_DEMAND_CUSTOMER_DELTA_TRIGGER=1
AUTOMATON_DEMAND_REVENUE_GROWTH_TRIGGER=0.20
AUTOMATON_MIN_PAID_CUSTOMERS=1
AUTOMATON_NEXT_SOURCE_MONTHLY_COST=100
AUTOMATON_INTERNAL_REQUEST_TIMEOUT_MS=10000

# Treasury policy and execution controls
AUTOMATON_TREASURY_POLICY_ENABLED=true
AUTOMATON_TREASURY_REQUIRE_ALLOWLIST=true
# Comma-separated destination addresses (0x...).
AUTOMATON_TREASURY_ALLOWLIST=0xa706A8631AcdfD24611bC826d07bD783c00E89B3
AUTOMATON_TREASURY_MIN_RESERVE_CENTS=500
# Bigger single spends than this require human review, even if daily budget remains.
AUTOMATON_TREASURY_AUTO_APPROVE_MAX_CENTS=100
AUTOMATON_TREASURY_HARD_PER_TRANSFER_CENTS=5000
# Free-will budget: up to $5/day without human sign-off.
AUTOMATON_TREASURY_HARD_DAILY_LIMIT_CENTS=500
AUTOMATON_TREASURY_AUTO_EXECUTE_APPROVED=false
AUTOMATON_TREASURY_EXECUTION_BACKEND=vultisig
# Telegram treasury alerts
AUTOMATON_TREASURY_TELEGRAM_ALERTS_ENABLED=true
AUTOMATON_TREASURY_TELEGRAM_BOT_TOKEN=
AUTOMATON_TREASURY_TELEGRAM_CHAT_ID=
AUTOMATON_TREASURY_TELEGRAM_USERNAME=@degenurai
AUTOMATON_TREASURY_TELEGRAM_OFFSET_FILE=~/.automaton/treasury-telegram-offset.json
AUTOMATON_TREASURY_TELEGRAM_COMMAND_POLL_TIMEOUT_SEC=20
AUTOMATON_TREASURY_TX_EXPLORER_TX_URL_TEMPLATE=https://basescan.org/tx/{tx}

# Vultisig broker scaffolding
# mode=outbox writes JSON intents to outbox for a human/worker with Vultisig SDK.
# mode=http posts intents to AUTOMATON_VULTISIG_BROKER_URL.
AUTOMATON_VULTISIG_BROKER_MODE=outbox
AUTOMATON_VULTISIG_OUTBOX_DIR=~/.automaton/vultisig-outbox
AUTOMATON_VULTISIG_BROKER_URL=
AUTOMATON_VULTISIG_BROKER_TOKEN=
AUTOMATON_VULTISIG_BROKER_TIMEOUT_MS=10000
AUTOMATON_VULTISIG_VAULT_POLICY_PROFILE=secure
AUTOMATON_VULTISIG_PROCESSED_DIR=~/.automaton/vultisig-outbox/processed
AUTOMATON_VULTISIG_FAILED_DIR=~/.automaton/vultisig-outbox/failed
# Worker controls (treasury:worker script)
AUTOMATON_VULTISIG_WORKER_AUTO_APPROVE=false
AUTOMATON_VULTISIG_WORKER_DRY_RUN=true
AUTOMATON_VULTISIG_WORKER_ACTOR=vultisig-worker
# Command that accepts the outbox file path and returns JSON {status, txRef, message}
# Default signer wraps Vultisig CLI send command under node@22.
AUTOMATON_VULTISIG_SIGNER_CMD=node scripts/treasury-vultisig-send-signer.mjs
AUTOMATON_VULTISIG_SIGNER_TIMEOUT_MS=120000
AUTOMATON_VULTISIG_CLI_TIMEOUT_MS=30000
# Leave blank to auto-discover via: npx -y node@22 -e "process.execPath"
AUTOMATON_VULTISIG_NODE22_PATH=
AUTOMATON_VULTISIG_NODE22_DISCOVERY_TIMEOUT_MS=45000
# Optional explicit path to @vultisig/cli/dist/index.js
AUTOMATON_VULTISIG_CLI_ENTRY=
AUTOMATON_VULTISIG_AUTO_INSTALL_CLI=true
AUTOMATON_VULTISIG_CLI_VERSION=0.5.0
AUTOMATON_VULTISIG_CLI_INSTALL_TIMEOUT_MS=180000
# Default intent-to-send mapping (amount token units = amountCents / divisor)
AUTOMATON_VULTISIG_SEND_CHAIN=base
AUTOMATON_VULTISIG_SEND_TOKEN=
# Optional token decimal hint when CLI token amount parsing assumes 18 decimals.
# Example for Base USDC: 6
AUTOMATON_VULTISIG_SEND_TOKEN_DECIMALS=
AUTOMATON_VULTISIG_SEND_AMOUNT_DIVISOR=100
AUTOMATON_VULTISIG_SEND_MEMO=automaton treasury intent {intent_id}
AUTOMATON_VULTISIG_SEND_TIMEOUT_MS=120000
# Optional active vault selector and password for non-interactive signing
AUTOMATON_VULTISIG_VAULT=
AUTOMATON_VULTISIG_PASSWORD=

# Optional autonomous demand repricing (off by default)
AUTOMATON_AUTO_REPRICE_ENABLED=false
AUTOMATON_AUTO_REPRICE_PRODUCT_ID=crossdomain_risk_nowcast_v1
AUTOMATON_AUTO_REPRICE_ACCESS_MODE=latest
AUTOMATON_AUTO_REPRICE_STEP_PCT=0.10
AUTOMATON_AUTO_REPRICE_MAX_USDC=0.05

# Optional autonomous expansion apply (off by default)
AUTOMATON_AUTO_EXPANSION_APPLY_ENABLED=false
AUTOMATON_AUTO_EXPANSION_FAMILY=market_microstructure
AUTOMATON_AUTO_EXPANSION_SOURCE_REF=connector://market/binance-book-ticker?symbol=ETHUSDT
AUTOMATON_AUTO_EXPANSION_POLLING_INTERVAL_SECONDS=60
AUTOMATON_AUTO_EXPANSION_QUALITY_SCORE=0.72
AUTOMATON_AUTO_EXPANSION_NAME_PREFIX=Auto Expansion Source
AUTOMATON_AUTO_EXPANSION_RUN_SYNTHESIS=true
# Comma-separated product IDs; leave empty to refresh all active products
AUTOMATON_AUTO_EXPANSION_TARGET_PRODUCT_IDS=

# Product code-change pipeline (guarded patch apply)
AUTOMATON_AUTONOMY_PIPELINE_ENABLED=false
AUTOMATON_PRODUCT_REPO_PATH=/root/new-project-service
AUTOMATON_PRODUCT_PATCH_QUEUE_DIR=/root/new-project-service/infra/automaton/patch-queue/incoming
AUTOMATON_PRODUCT_PATCH_APPLIED_DIR=/root/new-project-service/infra/automaton/patch-queue/applied
AUTOMATON_PRODUCT_PATCH_FAILED_DIR=/root/new-project-service/infra/automaton/patch-queue/failed
AUTOMATON_PRODUCT_PIPELINE_SCRIPT=/root/new-project-service/scripts/autonomy-patch-pipeline.sh
AUTOMATON_PRODUCT_PATCH_TIMEOUT_MS=1200000
AUTOMATON_PRODUCT_PATCH_AUTO_COMMIT=true
